[![reuse](actions/workflows/reuse.yaml/badge.svg)](actions/workflows/reuse.yaml)

---

# KiBot CI/CD template repository

This repository provides a ready-to-go CI/CD workflow for KiCad with GitHub actions.

## Features of this repository template

1. Integration with GitHub releases to automatically produce documentation and
   fabrication files on every GitHub release, including automatic date and version
   stamping of schematics and PCBs.
2. KiBot preflighting on every pull request (ERC/DRC checks disabled by default).

## Creating your GitHub repo and KiCad project

To create a KiCad project using this GitHub template:

1. Hit the _Use this template_ button then follow the steps from GitHub to create a copy of the repo. **The repository name must exactly match the name of the KiCad project.
   Do not use spaces in either the repository or the project name.**
2. Clone the new repo locally.
3. remove the Kicad sample project files from the root folder
4. Go to _File_ > _New_ > _Project..._ in KiCad.
5. Name the project the exact same name as the GitHub repository name.
6. Uncheck the _Create a new directory for this project_ option. **This is very important!**
7. Save the project into the top level of the folder for the GitHub repository.

Do not use spaces in the GitHub repository or KiCad project name. Use underscores or hyphens instead, for example `TBM930_De-Ice_-_Panel` or `Collins-FMS-3000`.

## Setting up date and version number replacement

The GitHub automation can automatically set the date and version number in the generated schematic and PCBs. Before using this make sure to set the timezone to your local timezone in the `.github\workflows\draft.yml` and `.github\workflows\release.yml` files.

Version number and date replacement is done on the `%%version%%` and `%%date%%` string wherever they appear in your `.sch` and `.kicad_pcb` files. Typically you will use them in the _Page settings_ dialog for the schematic and as text in silkscreen and/or copper layers on your board.

## Documentation generated

The following documents are generated on every release build:

```
- cad/
   - dxf/
      - AutoCAD - DXF
   - boardview - BRD
   - 3D render - STEP
- docs/
   - bom/
      - Interactive BOM - HTML
      - Octopart list - CSV
      - KiCost - XLSX
   - schematic - PDF
- img/
   - pcb/
      - PCB front - SVG
      - PCB back - SVG
   - render
      - PCB render - PNG
   - schematic - SVG
- gerbers - ZIP
```

Most of these documents (not the fabrication files) can also be generated by manually running the `draft` action on GitHub.
