# This script is called by the .github/workflows/release.yml workflow to generate documentation
# (PDFs, interactive BOMs, board images) and fabrication files for JLCPCB and PCBWay.
kibot:
  version: 1

preflight:
  # These are off by default so it's possible to generate output files prior to the board being
  # completely finished (e.g. for draft review, etc.).
  run_erc: true
  run_drc: true
  # This is important to set to true so replacement of version and date strings in the release
  # build process works correctly.
  check_zone_fills: true
  ignore_unconnected: false
  # bom generation needs updated xml file
  update_xml: true

global:
  # Sets the default output filename for all generated files. You likely don't have to change this.
  output: "%f-%i_%v.%x"

filters:
  - name: "exclude_any"
    type: "generic"
    comment: "Exclude logos, testpoints, fiducials and power"
    exclude_any:
      - column: Reference
        regex: "^(G|#|TP|F).*"

# This imports the KiBot scripts that actually do all the generation. If you want to
# generate different things/more things then change these to point to other .kibot.yaml files.
import:
  - file: includes/bom.kibot.yaml
  - file: includes/cad.kibot.yaml
  - file: includes/docs.kibot.yaml
  - file: includes/plot_jlcpcb-green-enig.kibot.yaml
  - file: includes/plot_jlcpcb-green-hasl.kibot.yaml
  - file: includes/plot_oshpark-afterdark.kibot.yaml
  - file: includes/plot_oshpark-purple.kibot.yaml
