# SPDX-FileCopyrightText: 2022 nerdyscout <https://github.com/nerdyscout/>
#
# SPDX-License-Identifier: CC0-1.0

name: OSHWA
# see https: //certificationapi.oshwa.org/documentation#tag/Project/paths/~1api~1projects/post

on: [push, pull_request]

jobs:
  publish:
    runs-on: ubuntu-latest
    steps:
      - name: oshwa
        uses: satak/webrequest-action@master
        with:
          url: "https://certificationapi.oshwa.org/api/projects/"
          method: POST
          headers: '{"Authentication": "Token ${{ env.TOKEN }}"}'
          payload: |
            {
              "responsiblePartyType": "Individual",
              "responsibleParty": "Company Name",
              "bindingParty": "Jane Doe",
              "country": "United States of America",
              "streetAddress1": "255 Pouros Circle",
              "streetAddress2": "Suite 123",
              "city": "Raleigh",
              "state": "North Carolina",
              "postalCode": 27616,
              "privateContact": "jane@example.com",
              "publicContact": "jane.doe@example.com",
              "projectName": "My Open Source Project",
              "projectWebsite": "https://example.com",
              "projectVersion": 1,
              "previousVersions": [
                "US000000"
              ],
              "projectDescription": "Open source project description",
              "primaryType": "Electronics",
              "additionalType": [
                "3D Printing"
              ],
              "projectKeywords": [
                "electronics"
              ],
              "citations": [
                {
                  "url": "https://example.com",
                  "title": "My first citation"
                }
              ],
              "documentationUrl": "https://example.com",
              "availableFileFormat": true,
              "hardwareLicense": "Other",
              "softwareLicense": "No software",
              "documentationLicense": "Other",
              "noCommercialRestriction": true,
              "explanationNcr": "Lorem ipsum dolor sit amet.",
              "noDocumentationRestriction": true,
              "explanationNdr": "Lorem ipsum dolor sit amet.",
              "openHardwareComponents": true,
              "explanationOhwc": "Lorem ipsum dolor sit amet.",
              "creatorContribution": true,
              "explanationCcr": "Lorem ipsum dolor sit amet.",
              "noUseRestriction": true,
              "explanationNur": "Lorem ipsum dolor sit amet.",
              "redistributedWork": true,
              "explanationRwr": "Lorem ipsum dolor sit amet.",
              "noSpecificProduct": true,
              "explanationNsp": "Lorem ipsum dolor sit amet.",
              "noComponentRestriction": true,
              "explanationNor": "Lorem ipsum dolor sit amet.",
              "technologyNeutral": true,
              "explanationTn": "Lorem ipsum dolor sit amet.",
              "certificationMarkTerms": {
                "accurateContactInformation": {
                  "term": "I have provided OSHWA with accurate contact information, recognize that all official communications from OSHWA will be directed to that contact information, and will update that contact information as necessary.",
                  "agreement": true
                },
                "complianceWithOfficialCertificationGuidelines": {
                  "term": "I will only use the certification mark in compliance with official certification guidelines.",
                  "agreement": true
                },
                "oshwaCertificationMark": {
                  "term": "I acknowledge that all right, title, and interest in the certification mark remains with OSHWA.",
                  "agreement": true
                },
                "violationsEnforcement": {
                  "term": "I acknowledge that OSHWA has the right to enforce violations of the use of the mark. This enforcement may involve financial penalties for misuse in bad faith.",
                  "agreement": true
                },
                "responsibility": {
                  "term": "I have the ability to bind those responsible for the certified item to this agreement.",
                  "agreement": true
                }
              },
              "explanationCertificationTerms": "Lorem ipsum dolor sit amet.",
              "relationship": "self",
              "agreementTerms": true,
              "parentName": "J Doe"
            }
      - run: echo ${{ steps.oshwa.outputs.output }}
        if: always()
